"use strict";var Constant,Is,Log,Default2,Config,Watch,Trigger;(Constant||(Constant={})).OBSERVE_JS_ATTRIBUTE_NAME="data-observe-js",(e=>{function t(e){return null!=e&&""!==e.toString()}function n(e){return t(e)&&"object"==typeof e}e.defined=t,e.definedObject=n,e.definedBoolean=function(e){return t(e)&&"boolean"==typeof e},e.definedString=function(e){return t(e)&&"string"==typeof e},e.definedFunction=function(e){return t(e)&&"function"==typeof e},e.definedNumber=function(e){return t(e)&&"number"==typeof e},e.definedArray=function(e){return n(e)&&e instanceof Array},e.definedDate=function(e){return n(e)&&e instanceof Date}})(Is||(Is={})),(Log||(Log={})).error=function(e,t){let n=!0;return t.safeMode||(console.error(e),n=!1),n},(Default=>{function getAnyString(e,t){return"string"==typeof e?e:t}function getString(e,t){return Is.definedString(e)?e:t}function getBoolean(e,t){return Is.definedBoolean(e)?e:t}function getNumber(e,t){return Is.definedNumber(e)?e:t}function getFunction(e,t){return Is.definedFunction(e)?e:t}function getArray(e,t){return Is.definedArray(e)?e:t}function getObject(e,t){return Is.definedObject(e)?e:t}function getDate(e,t){return Is.definedDate(e)?e:t}function getStringOrArray(e,t){let n=t;if(Is.definedString(e)){const r=e.toString().split("space");0===r.length?e=t:n=r}else n=getArray(e,t);return n}function getObjectFromString(objectString,configuration){const result={parsed:!0,object:null};try{Is.definedString(objectString)&&(result.object=JSON.parse(objectString))}catch(e1){try{result.object=eval(`(${objectString})`),Is.definedFunction(result.object)&&(result.object=result.object())}catch(e){configuration.safeMode||(Log.error(configuration.text.objectErrorText.replace("{{error_1}}",e1.message).replace("{{error_2}}",e.message),configuration),result.parsed=!1),result.object=null}}return result}Default.getAnyString=getAnyString,Default.getString=getString,Default.getBoolean=getBoolean,Default.getNumber=getNumber,Default.getFunction=getFunction,Default.getArray=getArray,Default.getObject=getObject,Default.getDate=getDate,Default.getStringOrArray=getStringOrArray,Default.getObjectFromString=getObjectFromString})(Default2||(Default2={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e=null){let t=Default2.getObject(e,{});return t.safeMode=Default2.getBoolean(t.safeMode,!0),t.domElementTypes=Default2.getStringOrArray(t.domElementTypes,["*"]),t=function(e){return e.text=Default2.getObject(e.text,{}),e.text.objectErrorText=Default2.getString(e.text.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}"),e.text.attributeNotValidErrorText=Default2.getString(e.text.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object."),e.text.attributeNotSetErrorText=Default2.getString(e.text.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly."),e}(t),t}})(Config||(Config={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e){let t=Default2.getObject(e,{});return t.timeout=Default2.getNumber(t.timeout,250),t.starts=Default2.getDate(t.starts,null),t.expires=Default2.getDate(t.expires,null),t.reset=Default2.getBoolean(t.reset,!1),t.cancelOnChange=Default2.getBoolean(t.cancelOnChange,!1),t.maximumChangesBeforeCanceling=Default2.getNumber(t.maximumChangesBeforeCanceling,0),t.pauseTimeoutOnChange=Default2.getNumber(t.pauseTimeoutOnChange,0),t.propertyNames=Default2.getArray(t.propertyNames,null),t.allowCanceling=Default2.getBoolean(t.allowCanceling,!0),t.allowPausing=Default2.getBoolean(t.allowPausing,!0),t.removeAttribute=Default2.getBoolean(t.removeAttribute,!0),t=function(e){return e.events=Default2.getObject(e.events,{}),e.events.onChange=Default2.getFunction(e.events.onChange,null),e.events.onPropertyChange=Default2.getFunction(e.events.onPropertyChange,null),e.events.onCancel=Default2.getFunction(e.events.onCancel,null),e.events.onRemove=Default2.getFunction(e.events.onRemove,null),e.events.onStart=Default2.getFunction(e.events.onStart,null),e}(t),t}})(Watch||(Watch={})),(Trigger||(Trigger={})).customEvent=function(e,...t){Is.definedFunction(e)&&e.apply(null,[].slice.call(t,0))},(()=>{let e={};const t={};let n=!1;function r(){const t=e.domElementTypes,n=t.length;for(let e=0;e<n;e++){const n=document.getElementsByTagName(t[e]),r=[].slice.call(n),i=r.length;for(let e=0;e<i&&o(r[e]);e++);}}function o(t){let n=!0;if(Is.defined(t)&&t.hasAttribute(Constant.OBSERVE_JS_ATTRIBUTE_NAME)){const r=t.getAttribute(Constant.OBSERVE_JS_ATTRIBUTE_NAME);if(Is.definedString(r)){const o=Default2.getObjectFromString(r,e);if(o.parsed&&Is.definedObject(o.object)){const e=Watch.Options.get(o.object);Is.definedString(t.id)||(t.id=crypto.randomUUID()),e.removeAttribute&&t.removeAttribute(Constant.OBSERVE_JS_ATTRIBUTE_NAME),i(t,e,t.id)}else Log.error(e.text.attributeNotValidErrorText.replace("{{attribute_name}}",Constant.OBSERVE_JS_ATTRIBUTE_NAME),e),n=!1}else Log.error(e.text.attributeNotSetErrorText.replace("{{attribute_name}}",Constant.OBSERVE_JS_ATTRIBUTE_NAME),e),n=!1}return n}function i(n,r,o=null){let i=null;if(Is.definedObject(n)){i=crypto.randomUUID();const s=Watch.Options.get(r),c={};let f=null;if(c.options=s,c.totalChanges=0,Is.definedString(o)){const e=document.getElementById(o);Is.defined(e)&&(c.domElementId=o,c.cachedObject=e.outerHTML,c.originalObject=e.outerHTML,f=e.outerHTML)}else c.cachedObject=JSON.stringify(n),c.originalObject=n,f=n;Is.defined(c.cachedObject)&&(Trigger.customEvent(c.options.events.onStart,f),c.timer=setInterval((()=>{!function(n,r){const o=new Date;(!Is.definedDate(n.starts)||o>=n.starts)&&(!function(n){if(t.hasOwnProperty(n)){const r=t[n],o=Is.definedString(r.domElementId);let i=null;o&&(i=document.getElementById(r.domElementId),Is.defined(i)?r.originalObject=i.outerHTML:(r.originalObject="",Trigger.customEvent(r.options.events.onRemove,r.domElementId)));const s=r.cachedObject,c=r.originalObject,f=o?c:JSON.stringify(c);if(s!==f){if(r.options.reset?o?i.outerHTML=r.cachedObject:r.originalObject=Default2.getObjectFromString(s,e).object:r.cachedObject=f,o)Trigger.customEvent(r.options.events.onChange,s,f);else{const t=Default2.getObjectFromString(s,e).object,n=Default2.getObjectFromString(f,e).object;Is.definedArray(t)||Is.definedArray(n)?Trigger.customEvent(r.options.events.onChange,t,n):(!function(e,t,n){if(Is.definedArray(n.options.propertyNames)){const r=n.options.propertyNames.length;for(let o=0;o<r;o++){const r=n.options.propertyNames[o];if(e[r]!==t[r]){Trigger.customEvent(n.options.events.onChange,e,t);break}}}else Trigger.customEvent(n.options.events.onChange,e,t)}(t,n,r),Is.definedFunction(r.options.events.onPropertyChange)&&a(t,n,r))}r.totalChanges++,r.options.pauseTimeoutOnChange>0&&l(n,r.options.pauseTimeoutOnChange),r.options.cancelOnChange&&u(n),r.options.maximumChangesBeforeCanceling>0&&r.totalChanges>=r.options.maximumChangesBeforeCanceling&&u(n)}}}(r),Is.definedDate(n.expires)&&o>=n.expires&&u(r))}(s,i)}),s.timeout),t[i]=c)}return i}function a(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const o=e[r];let i=null;t.hasOwnProperty(r)&&(i=t[r]),Is.definedObject(o)&&Is.definedObject(i)?a(o,i,n):(!Is.definedArray(n.options.propertyNames)||n.options.propertyNames.indexOf(r)>-1)&&JSON.stringify(o)!==JSON.stringify(i)&&Trigger.customEvent(n.options.events.onPropertyChange,r,o,i)}}function s(){for(let e in t)t.hasOwnProperty(e)&&u(e)}function u(e){if(t.hasOwnProperty(e)){const r=t[e].options;(r.allowCanceling||n)&&(Trigger.customEvent(r.events.onCancel,e),clearInterval(t[e].timer),delete t[e])}}function l(e,n){let r=!1;if(t.hasOwnProperty(e)){const o=t[e].options;o.allowPausing&&(o.starts=new Date,o.starts.setMilliseconds(o.starts.getMilliseconds()+n),r=!0)}return r}const c={watch:function(e,t){return i(e,t)},cancelWatch:function(e){let n=!1;if(Is.definedString(e))if(t.hasOwnProperty(e))u(e),n=!0;else for(let r in t)if(t.hasOwnProperty(r)&&Is.definedString(t[r].domElementId)&&t[r].domElementId===e){u(r),n=!0;break}return n},cancelWatches:function(){return s(),c},getWatch:function(e){let n=null;if(Is.definedString(e))if(t.hasOwnProperty(e))n=t[e];else for(let r in t)if(t.hasOwnProperty(r)&&Is.definedString(t[r].domElementId)&&t[r].domElementId===e){n=t[r];break}return n},getWatches:function(){return t},pauseWatch:function(e,n){let r=!1;if(Is.definedString(e)&&Is.definedNumber(n))if(t.hasOwnProperty(e))r=l(e,n);else for(let o in t)if(t.hasOwnProperty(o)&&Is.definedString(t[o].domElementId)&&t[o].domElementId===e){r=l(o,n);break}return r},pauseWatches:function(e){if(Is.definedNumber(e))for(let n in t)t.hasOwnProperty(n)&&l(n,e);return c},resumeWatch:function(e){let n=!1;if(Is.definedString(e))if(t.hasOwnProperty(e))t[e].options.starts=null,n=!0;else for(let r in t)if(t.hasOwnProperty(r)&&Is.definedString(t[r].domElementId)&&t[r].domElementId===e){t[r].options.starts=null,n=!0;break}return n},resumeWatches:function(){for(let e in t)t.hasOwnProperty(e)&&(t[e].options.starts=null);return c},searchDomForNewWatches:function(){return r(),c},setConfiguration:function(t){if(Is.definedObject(t)){let n=!1;const r=e;for(let o in t)t.hasOwnProperty(o)&&e.hasOwnProperty(o)&&r[o]!==t[o]&&(r[o]=t[o],n=!0);n&&(e=Config.Options.get(r))}return c},getVersion:function(){return"1.1.0"}};e=Config.Options.get(),document.addEventListener("DOMContentLoaded",(()=>r())),window.addEventListener("pagehide",(()=>{n=!0,s()})),Is.defined(window.$observe)||(window.$observe=c)})();