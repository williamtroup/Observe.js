/*! Observe.js v0.5.0 | (c) Bunoon | MIT License */
(function(){function J(){for(var a=q.domElementTypes,b=a.length,c=0;c<b;c++){var g=y.getElementsByTagName(a[c]);g=[].slice.call(g);for(var h=g.length,k=0;k<h;k++){var f=g[k],u=!0;if(r(f)&&f.hasAttribute("data-observe-watch-options")){var d=f.getAttribute("data-observe-watch-options");m(d)?(d=A(d),d.parsed&&t(d.result)?(d=K(d.result),m(f.id)||(f.id=L()),f.removeAttribute("data-observe-watch-options"),M(f,d,f.id)):q.safeMode||(console.error("The attribute 'data-observe-watch-options' is not a valid object."),
u=!1)):q.safeMode||(console.error("The attribute 'data-observe-watch-options' has not been set correctly."),u=!1)}if(!u)break}}}function M(a,b,c,g){var h=null;if(t(a)){h=L();var k=K(b);b={};b.options=k;b.totalChanges=0;m(c)?(a=y.getElementById(c),r(a)&&(b.domElementId=c,b.cachedObject=a.outerHTML,b.originalObject=a.outerHTML)):(b.cachedObject=JSON.stringify(a),b.originalObject=a,b.propertyNames=g);b.timer=setInterval(function(){var f=h,u=new Date;if(!B(k.starts)||u>=k.starts){if(e.hasOwnProperty(f)){var d=
e[f],n=m(d.domElementId),p=null;n&&(p=y.getElementById(d.domElementId),r(p)?d.originalObject=p.outerHTML:(d.originalObject=C.empty,v(d.options.onRemove,d.domElementId)));var w=d.cachedObject,l=d.originalObject;l=n?l:JSON.stringify(l);if(w!==l){d.options.reset?n?p.outerHTML=d.cachedObject:d.originalObject=A(w).result:d.cachedObject=l;if(n)v(d.options.onChange,w,l);else if(n=A(w).result,p=A(l).result,!z(n)&&!z(p)){if(z(d.propertyNames))for(w=d.propertyNames.length,l=0;l<w;l++){var N=d.propertyNames[l];
if(n[N]!==p[N]){v(d.options.onChange,n,p);break}}else v(d.options.onChange,n,p);D(d.options.onPropertyChange)&&O(n,p,d)}0<d.options.pauseTimeoutOnChange&&G(f,d.options.pauseTimeoutOnChange);d.options.cancelOnChange&&x(f);d.totalChanges++;0<d.options.maximumChangesBeforeCanceling&&d.totalChanges>=d.options.maximumChangesBeforeCanceling&&x(f)}}B(k.expires)&&u>=k.expires&&x(f)}},k.timeout);e[h]=b}return h}function O(a,b,c){var g=c.options,h;for(h in a)if(a.hasOwnProperty(h)){var k=a[h],f=null;b.hasOwnProperty(h)&&
(f=b[h]);t(k)&&t(f)?O(k,f,g):(!z(c.propertyNames)||-1<c.propertyNames.indexOf(h))&&JSON.stringify(k)!==JSON.stringify(f)&&v(g.onPropertyChange,h,k,f)}}function P(){for(var a in e)e.hasOwnProperty(a)&&x(a)}function x(a){e.hasOwnProperty(a)&&(v(e[a].options.onCancel,a),clearTimeout(e[a].timer),delete e[a])}function G(a,b){var c=!1;e.hasOwnProperty(a)&&(c=e[a].options,c.starts=new Date,c.starts.setMilliseconds(c.starts.getMilliseconds()+b),c=!0);return c}function K(a){a=t(a)?a:{};a.timeout=H(a.timeout,
250);var b=a;var c=a.starts;c=B(c)?c:null;b.starts=c;b=a;c=a.expires;c=B(c)?c:null;b.expires=c;a.reset=I(a.reset,!1);a.cancelOnChange=I(a.cancelOnChange,!1);a.maximumChangesBeforeCanceling=H(a.maximumChangesBeforeCanceling,0);a.pauseTimeoutOnChange=H(a.pauseTimeoutOnChange,0);a.onChange=E(a.onChange,null);a.onPropertyChange=E(a.onPropertyChange,null);a.onCancel=E(a.onCancel,null);a.onRemove=E(a.onRemove,null);return a}function v(a){D(a)&&a.apply(null,[].slice.call(arguments,1))}function L(){for(var a=
[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push("-");var c=Math.floor(16*Math.random()).toString(16);a.push(c)}return a.join(C.empty)}function r(a){return null!==a&&void 0!==a&&a!==C.empty}function t(a){return r(a)&&"object"===typeof a}function m(a){return r(a)&&"string"===typeof a}function D(a){return r(a)&&"function"===typeof a}function z(a){return t(a)&&a instanceof Array}function B(a){return t(a)&&a instanceof Date}function I(a,b){return r(a)&&"boolean"===typeof a?a:b}function E(a,b){return D(a)?
a:b}function H(a,b){return r(a)&&"number"===typeof a?a:b}function A(a){var b=!0,c=null;try{m(a)&&(c=JSON.parse(a))}catch(g){try{c=eval("("+a+")"),D(c)&&(c=c())}catch(h){b=R("Errors in object: "+g.message+", "+h.message),c=null}}return{parsed:b,result:c}}function R(a){var b=!0;q.safeMode||(console.error(a),b=!1);return b}function Q(){q.safeMode=I(q.safeMode,!0);var a=q,b=q.domElementTypes,c=["*"];m(b)?(b=b.split(C.space),0===b.length&&(b=c)):b=z(b)?b:c;a.domElementTypes=b}var y=null,F=null,C={empty:""},
e={},q={};this.watch=function(a,b,c){return M(a,b,null,c)};this.cancelWatch=function(a){var b=!1;if(e.hasOwnProperty(a))x(a),b=!0;else for(var c in e)if(e.hasOwnProperty(c)&&m(e[c].domElementId)&&e[c].domElementId===a){x(c);b=!0;break}return b};this.cancelWatches=function(){P();return this};this.getWatch=function(a){var b=null;if(e.hasOwnProperty(a))b=e[a];else for(var c in e)if(e.hasOwnProperty(c)&&m(e[c].domElementId)&&e[c].domElementId===a){b=e[c];break}return b};this.getWatches=function(){return e};
this.pauseWatch=function(a,b){var c=!1;if(e.hasOwnProperty(a))c=G(a,b);else for(var g in e)if(e.hasOwnProperty(g)&&m(e[g].domElementId)&&e[g].domElementId===a){c=G(g,b);break}return c};this.resumeWatch=function(a){var b=!1;if(e.hasOwnProperty(a))e[a].options.starts=null,b=!0;else for(var c in e)if(e.hasOwnProperty(c)&&m(e[c].domElementId)&&e[c].domElementId===a){e[c].options.starts=null;b=!0;break}return b};this.searchDomForNewWatches=function(){J();return this};this.setConfiguration=function(a){q=
t(a)?a:{};Q();return this};this.getVersion=function(){return"0.5.0"};(function(a,b){y=a;F=b;Q();y.addEventListener("DOMContentLoaded",function(){J()});F.addEventListener("unload",function(){P()});r(F.$observe)||(F.$observe=this)})(document,window)})();