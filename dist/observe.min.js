/*! Observe.js v0.4.0 | (c) Bunoon | MIT License */
(function(){function I(){for(var a=n.domElementTypes,b=a.length,c=0;c<b;c++){var e=v.getElementsByTagName(a[c]);e=[].slice.call(e);for(var h=e.length,m=0;m<h;m++){var k=e[m],g=!0;if(p(k)&&k.hasAttribute("data-observe-watch-options")){var f=k.getAttribute("data-observe-watch-options");q(f)?(f=w(f),f.parsed&&r(f.result)?(f=J(f.result),q(k.id)||(k.id=K()),k.removeAttribute("data-observe-watch-options"),L(k,f,k.id)):n.safeMode||(console.error("The attribute 'data-observe-watch-options' is not a valid object."),
g=!1)):n.safeMode||(console.error("The attribute 'data-observe-watch-options' has not been set correctly."),g=!1)}if(!g)break}}}function L(a,b,c){var e=null;if(r(a)){e=K();var h=J(b);b={};b.options=h;b.domElementId=c;b.totalChanges=0;q(c)?(a=v.getElementById(c),p(a)&&(b.cachedObject=a.outerHTML,b.originalObject=a.outerHTML)):(b.cachedObject=JSON.stringify(a),b.originalObject=a);b.timer=setInterval(function(){var m=new Date;if(!x(h.starts)||m>=h.starts){var k=e;if(d.hasOwnProperty(k)){var g=d[k],f=
q(g.domElementId),t=null;f&&(t=v.getElementById(g.domElementId),p(t)?g.originalObject=t.outerHTML:g.originalObject=y.empty);var z=g.cachedObject,l=g.originalObject,A=f?l:JSON.stringify(l);z!==A&&(l=g.options,l.reset?f?t.outerHTML=g.cachedObject:g.originalObject=w(z).result:g.cachedObject=A,f?B(l.onChange,z,A):(f=w(z).result,t=w(A).result,B(l.onChange,f,t),C(l.onPropertyChange)&&!M(f)&&N(f,t,l)),0<l.pauseTimeoutOnChange&&E(k,l.pauseTimeoutOnChange),l.cancelOnChange&&u(k),g.totalChanges++,0<l.maximumChangesBeforeCanceling&&
g.totalChanges>=l.maximumChangesBeforeCanceling&&u(k))}x(h.expires)&&m>=h.expires&&u(e)}},h.timeout);d[e]=b}return e}function N(a,b,c){for(var e in a)if(a.hasOwnProperty(e)){var h=a[e],m=null;b.hasOwnProperty(e)&&(m=b[e]);r(h)&&r(m)?N(h,m,c):JSON.stringify(h)!==JSON.stringify(m)&&B(c.onPropertyChange,e,h,m)}}function O(){for(var a in d)d.hasOwnProperty(a)&&u(a)}function u(a){d.hasOwnProperty(a)&&(B(d[a].options.onCancel,a),clearTimeout(d[a].timer),delete d[a])}function E(a,b){var c=!1;d.hasOwnProperty(a)&&
(c=d[a].options,c.starts=new Date,c.starts.setMilliseconds(c.starts.getMilliseconds()+b),c=!0);return c}function J(a){a=r(a)?a:{};a.timeout=F(a.timeout,250);var b=a;var c=a.starts;c=x(c)?c:null;b.starts=c;b=a;c=a.expires;c=x(c)?c:null;b.expires=c;a.reset=G(a.reset,!1);a.cancelOnChange=G(a.cancelOnChange,!1);a.maximumChangesBeforeCanceling=F(a.maximumChangesBeforeCanceling,0);a.pauseTimeoutOnChange=F(a.pauseTimeoutOnChange,0);a.onChange=H(a.onChange,null);a.onPropertyChange=H(a.onPropertyChange,null);
a.onCancel=H(a.onCancel,null);return a}function B(a){C(a)&&a.apply(null,[].slice.call(arguments,1))}function K(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push("-");var c=Math.floor(16*Math.random()).toString(16);a.push(c)}return a.join(y.empty)}function p(a){return null!==a&&void 0!==a&&a!==y.empty}function r(a){return p(a)&&"object"===typeof a}function q(a){return p(a)&&"string"===typeof a}function C(a){return p(a)&&"function"===typeof a}function M(a){return r(a)&&a instanceof
Array}function x(a){return r(a)&&a instanceof Date}function G(a,b){return p(a)&&"boolean"===typeof a?a:b}function H(a,b){return C(a)?a:b}function F(a,b){return p(a)&&"number"===typeof a?a:b}function w(a){var b=!0,c=null;try{q(a)&&(c=JSON.parse(a))}catch(e){try{c=eval("("+a+")"),C(c)&&(c=c())}catch(h){b=Q("Errors in object: "+e.message+", "+h.message),c=null}}return{parsed:b,result:c}}function Q(a){var b=!0;n.safeMode||(console.error(a),b=!1);return b}function P(){n.safeMode=G(n.safeMode,!0);var a=
n,b=n.domElementTypes,c=["*"];q(b)?(b=b.split(y.space),0===b.length&&(b=c)):b=M(b)?b:c;a.domElementTypes=b}var v=null,D=null,y={empty:""},d={},n={};this.watchObject=function(a,b){return L(a,b)};this.cancelWatch=function(a){var b=!1;if(d.hasOwnProperty(a))u(a),b=!0;else for(var c in d)if(d.hasOwnProperty(c)&&q(d[c].domElementId)&&d[c].domElementId===a){u(c);b=!0;break}return b};this.cancelWatches=function(){O();return this};this.getWatch=function(a){var b=null;if(d.hasOwnProperty(a))b=d[a];else for(var c in d)if(d.hasOwnProperty(c)&&
q(d[c].domElementId)&&d[c].domElementId===a){b=d[c];break}return b};this.getWatches=function(){return d};this.pauseWatch=function(a,b){var c=!1;if(d.hasOwnProperty(a))c=E(a,b);else for(var e in d)if(d.hasOwnProperty(e)&&q(d[e].domElementId)&&d[e].domElementId===a){c=E(e,b);break}return c};this.searchDomForNewWatches=function(){I();return this};this.setConfiguration=function(a){n=r(a)?a:{};P();return this};this.getVersion=function(){return"0.4.0"};(function(a,b){v=a;D=b;P();v.addEventListener("DOMContentLoaded",
function(){I()});D.addEventListener("unload",function(){O()});p(D.$observe)||(D.$observe=this)})(document,window)})();