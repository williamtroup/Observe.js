/*! Observe.js v0.4.0 | (c) Bunoon | MIT License */
(function(){function I(){for(var a=n.domElementTypes,b=a.length,c=0;c<b;c++){var e=v.getElementsByTagName(a[c]);e=[].slice.call(e);for(var g=e.length,m=0;m<g;m++){var k=e[m],h=!0;if(p(k)&&k.hasAttribute("data-observe-options")){var f=k.getAttribute("data-observe-options");q(f)?(f=w(f),f.parsed&&r(f.result)?(f=J(f.result),q(k.id)||(k.id=K()),L(k,f,k.id)):n.safeMode||(console.error("The attribute 'data-observe-options' is not a valid object."),h=!1)):n.safeMode||(console.error("The attribute 'data-observe-options' has not been set correctly."),
h=!1)}if(!h)break}}}function L(a,b,c){var e=null;if(r(a)){e=K();var g=J(b);b={};b.options=g;b.domElementId=c;b.totalChanges=0;q(c)?(a=v.getElementById(c),p(a)&&(b.cachedObject=a.outerHTML,b.originalObject=a.outerHTML)):(b.cachedObject=JSON.stringify(a),b.originalObject=a);b.timer=setInterval(function(){var m=new Date;if(!x(g.starts)||m>=g.starts){var k=e;if(d.hasOwnProperty(k)){var h=d[k],f=q(h.domElementId),t=null;f&&(t=v.getElementById(h.domElementId),p(t)&&(h.originalObject=t.outerHTML));var y=
h.cachedObject,l=h.originalObject,z=f?l:JSON.stringify(l);y!==z&&(l=h.options,l.reset?f?t.outerHTML=h.cachedObject:h.originalObject=w(y).result:h.cachedObject=z,f?A(l.onChange,y,z):(f=w(y).result,t=w(z).result,A(l.onChange,f,t),B(l.onPropertyChange)&&!M(f)&&N(f,t,l)),0<l.pauseTimeoutOnChange&&D(k,l.pauseTimeoutOnChange),l.cancelOnChange&&u(k),h.totalChanges++,0<l.maximumChangesBeforeCanceling&&h.totalChanges>=l.maximumChangesBeforeCanceling&&u(k))}x(g.expires)&&m>=g.expires&&u(e)}},g.timeout);d[e]=
b}return e}function N(a,b,c){for(var e in a)if(a.hasOwnProperty(e)){var g=a[e],m=null;b.hasOwnProperty(e)&&(m=b[e]);r(g)&&r(m)?N(g,m,c):JSON.stringify(g)!==JSON.stringify(m)&&A(c.onPropertyChange,e,g,m)}}function O(){for(var a in d)d.hasOwnProperty(a)&&u(a)}function u(a){d.hasOwnProperty(a)&&(A(d[a].options.onCancel,a),clearTimeout(d[a].timer),delete d[a])}function D(a,b){var c=!1;d.hasOwnProperty(a)&&(c=d[a].options,c.starts=new Date,c.starts.setMilliseconds(c.starts.getMilliseconds()+b),c=!0);return c}
function J(a){a=r(a)?a:{};a.timeout=E(a.timeout,250);var b=a;var c=a.starts;c=x(c)?c:null;b.starts=c;b=a;c=a.expires;c=x(c)?c:null;b.expires=c;a.reset=F(a.reset,!1);a.cancelOnChange=F(a.cancelOnChange,!1);a.maximumChangesBeforeCanceling=E(a.maximumChangesBeforeCanceling,0);a.pauseTimeoutOnChange=E(a.pauseTimeoutOnChange,0);a.onChange=G(a.onChange,null);a.onPropertyChange=G(a.onPropertyChange,null);a.onCancel=G(a.onCancel,null);return a}function A(a){B(a)&&a.apply(null,[].slice.call(arguments,1))}
function K(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push("-");var c=Math.floor(16*Math.random()).toString(16);a.push(c)}return a.join(H.empty)}function p(a){return null!==a&&void 0!==a&&a!==H.empty}function r(a){return p(a)&&"object"===typeof a}function q(a){return p(a)&&"string"===typeof a}function B(a){return p(a)&&"function"===typeof a}function M(a){return r(a)&&a instanceof Array}function x(a){return r(a)&&a instanceof Date}function F(a,b){return p(a)&&"boolean"===typeof a?
a:b}function G(a,b){return B(a)?a:b}function E(a,b){return p(a)&&"number"===typeof a?a:b}function w(a){var b=!0,c=null;try{q(a)&&(c=JSON.parse(a))}catch(e){try{c=eval("("+a+")"),B(c)&&(c=c())}catch(g){b=Q("Errors in object: "+e.message+", "+g.message),c=null}}return{parsed:b,result:c}}function Q(a){var b=!0;n.safeMode||(console.error(a),b=!1);return b}function P(){n.safeMode=F(n.safeMode,!0);var a=n,b=n.domElementTypes,c=["*"];q(b)?(b=b.split(H.space),0===b.length&&(b=c)):b=M(b)?b:c;a.domElementTypes=
b}var v=null,C=null,H={empty:""},d={},n={};this.watchObject=function(a,b){return L(a,b)};this.cancelWatch=function(a){var b=!1;if(d.hasOwnProperty(a))u(a),b=!0;else for(var c in d)if(d.hasOwnProperty(c)&&q(d[c].domElementId)&&d[c].domElementId===a){u(c);b=!0;break}return b};this.cancelWatches=function(){O();return this};this.getWatch=function(a){var b=null;if(d.hasOwnProperty(a))b=d[a];else for(var c in d)if(d.hasOwnProperty(c)&&q(d[c].domElementId)&&d[c].domElementId===a){b=d[c];break}return b};
this.getWatches=function(){return d};this.pauseWatch=function(a,b){var c=!1;if(d.hasOwnProperty(a))c=D(a,b);else for(var e in d)if(d.hasOwnProperty(e)&&q(d[e].domElementId)&&d[e].domElementId===a){c=D(e,b);break}return c};this.searchDomForNewWatches=function(){I();return this};this.setConfiguration=function(a){n=r(a)?a:{};P();return this};this.getVersion=function(){return"0.4.0"};(function(a,b){v=a;C=b;P();v.addEventListener("DOMContentLoaded",function(){I()});C.addEventListener("unload",function(){O()});
p(C.$observe)||(C.$observe=this)})(document,window)})();