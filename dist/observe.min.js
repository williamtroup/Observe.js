/*! Observe.js v0.6.0 | (c) Bunoon | MIT License */
(function(){function I(){for(var a=q.domElementTypes,b=a.length,c=0;c<b;c++){var g=y.getElementsByTagName(a[c]);g=[].slice.call(g);for(var h=g.length,l=0;l<h;l++){var k=g[l],e=!0;if(r(k)&&k.hasAttribute("data-observe-watch-options")){var f=k.getAttribute("data-observe-watch-options");p(f)?(f=z(f),f.parsed&&t(f.result)?(f=J(f.result),p(k.id)||(k.id=K()),k.removeAttribute("data-observe-watch-options"),L(k,f,k.id)):q.safeMode||(console.error("The attribute 'data-observe-watch-options' is not a valid object."),
e=!1)):q.safeMode||(console.error("The attribute 'data-observe-watch-options' has not been set correctly."),e=!1)}if(!e)break}}}function L(a,b,c){var g=null;if(t(a)){g=K();var h=J(b);b={};b.options=h;b.totalChanges=0;p(c)?(a=y.getElementById(c),r(a)&&(b.domElementId=c,b.cachedObject=a.outerHTML,b.originalObject=a.outerHTML)):(b.cachedObject=JSON.stringify(a),b.originalObject=a);b.timer=setInterval(function(){var l=g,k=new Date;if(!A(h.starts)||k>=h.starts){if(d.hasOwnProperty(l)){var e=d[l],f=p(e.domElementId),
m=null;f&&(m=y.getElementById(e.domElementId),r(m)?e.originalObject=m.outerHTML:(e.originalObject=B.empty,u(e.options.onRemove,e.domElementId)));var v=e.cachedObject,n=e.originalObject;n=f?n:JSON.stringify(n);if(v!==n){e.options.reset?f?m.outerHTML=e.cachedObject:e.originalObject=z(v).result:e.cachedObject=n;if(f)u(e.options.onChange,v,n);else if(f=z(v).result,m=z(n).result,w(f)||w(m))u(e.options.onChange,f,m);else{if(w(e.options.propertyNames))for(v=e.options.propertyNames.length,n=0;n<v;n++){var M=
e.options.propertyNames[n];if(f[M]!==m[M]){u(e.options.onChange,f,m);break}}else u(e.options.onChange,f,m);C(e.options.onPropertyChange)&&N(f,m,e)}e.totalChanges++;0<e.options.pauseTimeoutOnChange&&F(l,e.options.pauseTimeoutOnChange);e.options.cancelOnChange&&x(l);0<e.options.maximumChangesBeforeCanceling&&e.totalChanges>=e.options.maximumChangesBeforeCanceling&&x(l)}}A(h.expires)&&k>=h.expires&&x(l)}},h.timeout);d[g]=b}return g}function N(a,b,c){var g=c.options,h;for(h in a)if(a.hasOwnProperty(h)){var l=
a[h],k=null;b.hasOwnProperty(h)&&(k=b[h]);t(l)&&t(k)?N(l,k,g):(!w(c.options.propertyNames)||-1<c.options.propertyNames.indexOf(h))&&JSON.stringify(l)!==JSON.stringify(k)&&u(g.onPropertyChange,h,l,k)}}function O(){for(var a in d)d.hasOwnProperty(a)&&x(a)}function x(a){d.hasOwnProperty(a)&&(u(d[a].options.onCancel,a),clearTimeout(d[a].timer),delete d[a])}function F(a,b){var c=!1;d.hasOwnProperty(a)&&(c=d[a].options,c.starts=new Date,c.starts.setMilliseconds(c.starts.getMilliseconds()+b),c=!0);return c}
function J(a){a=t(a)?a:{};a.timeout=G(a.timeout,250);var b=a;var c=a.starts;c=A(c)?c:null;b.starts=c;b=a;c=a.expires;c=A(c)?c:null;b.expires=c;a.reset=H(a.reset,!1);a.cancelOnChange=H(a.cancelOnChange,!1);a.maximumChangesBeforeCanceling=G(a.maximumChangesBeforeCanceling,0);a.pauseTimeoutOnChange=G(a.pauseTimeoutOnChange,0);b=a;c=a.propertyNames;c=w(c)?c:null;b.propertyNames=c;a.onChange=D(a.onChange,null);a.onPropertyChange=D(a.onPropertyChange,null);a.onCancel=D(a.onCancel,null);a.onRemove=D(a.onRemove,
null);return a}function u(a){C(a)&&a.apply(null,[].slice.call(arguments,1))}function K(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push("-");var c=Math.floor(16*Math.random()).toString(16);a.push(c)}return a.join(B.empty)}function r(a){return null!==a&&void 0!==a&&a!==B.empty}function t(a){return r(a)&&"object"===typeof a}function p(a){return r(a)&&"string"===typeof a}function C(a){return r(a)&&"function"===typeof a}function w(a){return t(a)&&a instanceof Array}function A(a){return t(a)&&
a instanceof Date}function H(a,b){return r(a)&&"boolean"===typeof a?a:b}function D(a,b){return C(a)?a:b}function G(a,b){return r(a)&&"number"===typeof a?a:b}function z(a){var b=!0,c=null;try{p(a)&&(c=JSON.parse(a))}catch(g){try{c=eval("("+a+")"),C(c)&&(c=c())}catch(h){b=Q("Errors in object: "+g.message+", "+h.message),c=null}}return{parsed:b,result:c}}function Q(a){var b=!0;q.safeMode||(console.error(a),b=!1);return b}function P(){q.safeMode=H(q.safeMode,!0);var a=q,b=q.domElementTypes,c=["*"];p(b)?
(b=b.split(B.space),0===b.length&&(b=c)):b=w(b)?b:c;a.domElementTypes=b}var y=null,E=null,B={empty:""},d={},q={};this.watch=function(a,b){return L(a,b)};this.cancelWatch=function(a){var b=!1;if(d.hasOwnProperty(a))x(a),b=!0;else for(var c in d)if(d.hasOwnProperty(c)&&p(d[c].domElementId)&&d[c].domElementId===a){x(c);b=!0;break}return b};this.cancelWatches=function(){O();return this};this.getWatch=function(a){var b=null;if(d.hasOwnProperty(a))b=d[a];else for(var c in d)if(d.hasOwnProperty(c)&&p(d[c].domElementId)&&
d[c].domElementId===a){b=d[c];break}return b};this.getWatches=function(){return d};this.pauseWatch=function(a,b){var c=!1;if(d.hasOwnProperty(a))c=F(a,b);else for(var g in d)if(d.hasOwnProperty(g)&&p(d[g].domElementId)&&d[g].domElementId===a){c=F(g,b);break}return c};this.resumeWatch=function(a){var b=!1;if(d.hasOwnProperty(a))d[a].options.starts=null,b=!0;else for(var c in d)if(d.hasOwnProperty(c)&&p(d[c].domElementId)&&d[c].domElementId===a){d[c].options.starts=null;b=!0;break}return b};this.searchDomForNewWatches=
function(){I();return this};this.setConfiguration=function(a){q=t(a)?a:{};P();return this};this.getVersion=function(){return"0.6.0"};(function(a,b){y=a;E=b;P();y.addEventListener("DOMContentLoaded",function(){I()});E.addEventListener("unload",function(){O()});r(E.$observe)||(E.$observe=this)})(document,window)})();