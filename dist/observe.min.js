/*! Observe.js v0.5.0 | (c) Bunoon | MIT License */
(function(){function H(){for(var a=n.domElementTypes,b=a.length,c=0;c<b;c++){var f=v.getElementsByTagName(a[c]);f=[].slice.call(f);for(var k=f.length,h=0;h<k;h++){var l=f[h],e=!0;if(p(l)&&l.hasAttribute("data-observe-watch-options")){var g=l.getAttribute("data-observe-watch-options");m(g)?(g=x(g),g.parsed&&q(g.result)?(g=I(g.result),m(l.id)||(l.id=J()),l.removeAttribute("data-observe-watch-options"),K(l,g,l.id)):n.safeMode||(console.error("The attribute 'data-observe-watch-options' is not a valid object."),
e=!1)):n.safeMode||(console.error("The attribute 'data-observe-watch-options' has not been set correctly."),e=!1)}if(!e)break}}}function K(a,b,c){var f=null;if(q(a)){f=J();var k=I(b);b={};b.options=k;b.totalChanges=0;m(c)?(a=v.getElementById(c),p(a)&&(b.domElementId=c,b.cachedObject=a.outerHTML,b.originalObject=a.outerHTML)):(b.cachedObject=JSON.stringify(a),b.originalObject=a);b.timer=setInterval(function(){var h=f,l=new Date;if(!y(k.starts)||l>=k.starts){if(d.hasOwnProperty(h)){var e=d[h],g=m(e.domElementId),
r=null;g&&(r=v.getElementById(e.domElementId),p(r)?e.originalObject=r.outerHTML:(e.originalObject=z.empty,w(e.options.onRemove,e.domElementId)));var A=e.cachedObject,t=e.originalObject;t=g?t:JSON.stringify(t);A!==t&&(e.options.reset?g?r.outerHTML=e.cachedObject:e.originalObject=x(A).result:e.cachedObject=t,g?w(e.options.onChange,A,t):(g=x(A).result,r=x(t).result,w(e.options.onChange,g,r),B(e.options.onPropertyChange)&&!L(g)&&M(g,r,e.options)),0<e.options.pauseTimeoutOnChange&&E(h,e.options.pauseTimeoutOnChange),
e.options.cancelOnChange&&u(h),e.totalChanges++,0<e.options.maximumChangesBeforeCanceling&&e.totalChanges>=e.options.maximumChangesBeforeCanceling&&u(h))}y(k.expires)&&l>=k.expires&&u(h)}},k.timeout);d[f]=b}return f}function M(a,b,c){for(var f in a)if(a.hasOwnProperty(f)){var k=a[f],h=null;b.hasOwnProperty(f)&&(h=b[f]);q(k)&&q(h)?M(k,h,c):JSON.stringify(k)!==JSON.stringify(h)&&w(c.onPropertyChange,f,k,h)}}function N(){for(var a in d)d.hasOwnProperty(a)&&u(a)}function u(a){d.hasOwnProperty(a)&&(w(d[a].options.onCancel,
a),clearTimeout(d[a].timer),delete d[a])}function E(a,b){var c=!1;d.hasOwnProperty(a)&&(c=d[a].options,c.starts=new Date,c.starts.setMilliseconds(c.starts.getMilliseconds()+b),c=!0);return c}function I(a){a=q(a)?a:{};a.timeout=F(a.timeout,250);var b=a;var c=a.starts;c=y(c)?c:null;b.starts=c;b=a;c=a.expires;c=y(c)?c:null;b.expires=c;a.reset=G(a.reset,!1);a.cancelOnChange=G(a.cancelOnChange,!1);a.maximumChangesBeforeCanceling=F(a.maximumChangesBeforeCanceling,0);a.pauseTimeoutOnChange=F(a.pauseTimeoutOnChange,
0);a.onChange=C(a.onChange,null);a.onPropertyChange=C(a.onPropertyChange,null);a.onCancel=C(a.onCancel,null);a.onRemove=C(a.onRemove,null);return a}function w(a){B(a)&&a.apply(null,[].slice.call(arguments,1))}function J(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push("-");var c=Math.floor(16*Math.random()).toString(16);a.push(c)}return a.join(z.empty)}function p(a){return null!==a&&void 0!==a&&a!==z.empty}function q(a){return p(a)&&"object"===typeof a}function m(a){return p(a)&&
"string"===typeof a}function B(a){return p(a)&&"function"===typeof a}function L(a){return q(a)&&a instanceof Array}function y(a){return q(a)&&a instanceof Date}function G(a,b){return p(a)&&"boolean"===typeof a?a:b}function C(a,b){return B(a)?a:b}function F(a,b){return p(a)&&"number"===typeof a?a:b}function x(a){var b=!0,c=null;try{m(a)&&(c=JSON.parse(a))}catch(f){try{c=eval("("+a+")"),B(c)&&(c=c())}catch(k){b=P("Errors in object: "+f.message+", "+k.message),c=null}}return{parsed:b,result:c}}function P(a){var b=
!0;n.safeMode||(console.error(a),b=!1);return b}function O(){n.safeMode=G(n.safeMode,!0);var a=n,b=n.domElementTypes,c=["*"];m(b)?(b=b.split(z.space),0===b.length&&(b=c)):b=L(b)?b:c;a.domElementTypes=b}var v=null,D=null,z={empty:""},d={},n={};this.watch=function(a,b){return K(a,b)};this.cancelWatch=function(a){var b=!1;if(d.hasOwnProperty(a))u(a),b=!0;else for(var c in d)if(d.hasOwnProperty(c)&&m(d[c].domElementId)&&d[c].domElementId===a){u(c);b=!0;break}return b};this.cancelWatches=function(){N();
return this};this.getWatch=function(a){var b=null;if(d.hasOwnProperty(a))b=d[a];else for(var c in d)if(d.hasOwnProperty(c)&&m(d[c].domElementId)&&d[c].domElementId===a){b=d[c];break}return b};this.getWatches=function(){return d};this.pauseWatch=function(a,b){var c=!1;if(d.hasOwnProperty(a))c=E(a,b);else for(var f in d)if(d.hasOwnProperty(f)&&m(d[f].domElementId)&&d[f].domElementId===a){c=E(f,b);break}return c};this.resumeWatch=function(a){var b=!1;if(d.hasOwnProperty(a))d[a].options.starts=null,b=
!0;else for(var c in d)if(d.hasOwnProperty(c)&&m(d[c].domElementId)&&d[c].domElementId===a){d[c].options.starts=null;b=!0;break}return b};this.searchDomForNewWatches=function(){H();return this};this.setConfiguration=function(a){n=q(a)?a:{};O();return this};this.getVersion=function(){return"0.5.0"};(function(a,b){v=a;D=b;O();v.addEventListener("DOMContentLoaded",function(){H()});D.addEventListener("unload",function(){N()});p(D.$observe)||(D.$observe=this)})(document,window)})();